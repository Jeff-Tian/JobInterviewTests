<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>Haapy Sheep and Grey Wolf</title>
<style type="text/css">
.grey-wolf {
	background-color: grey;
	position: absolute;
	width: 100px;
	height: 100px;
	border-radius: 50%;
	border: solid 2px darkgray;
	vertical-align: middle;
	text-align: center;
}

.grey-wolf:before {
	content: '';
	display: inline-block;
	height: 100%;
	vertical-align: middle;
}

.grey-wolf:after {
	content: 'Grey Wolf!';
	margin: auto;
	font-weight: bold;
	vertical-align: middle;
}

.happy-sheet {
	background-color: white;
	position: absolute;
	width: 80px;
	height: 80px;
	border-radius: 40%;
	border: solid 5px black;
	vertical-align: middle;
	text-align: center;
	transform: rotate(90deg);
}

.happy-sheet:before {
	content: '';
	display: inline-block;
	height: 100%;
	vertical-align: middle;
}

.happy-sheet:after {
	content: ': )';
	font-family: Arial;
	margin: auto;
	font-weight: bold;
	vertical-align: middle;
}
</style>
<script type="text/javascript">
;(function(exports) {

/* =========================================================================
   A naive MVC 
   ========================================================================= */

/**
  * Model
  */
var GreenPlainModel = function (width, height) {
	this.width = width;
	this.height = height;

	return this;
};

var GreyWolf = function (x, y) {
	this.x = x;
	this.y = y;

	return this;
};

var HappySheet = function (x, y) {
	this.x = x;
	this.y = y;

	return this;
}

/**
  * View
  */
var NaiveGreenPlainView = function (model) {
	this.model = model;

	if(typeof NaiveGreenPlainView.__initialized__ === 'undefined') {
		NaiveGreenPlainView.prototype.output = function () {
			var data = 
				'<div class="green-plain" style="width: <%= width %>; height: <%= height %>; background-color: green;">' +
				'<div class="grey-wolf" style="left: <%= wolf.x %>; top: <%= wolf.y %>;">' +
				'</div>' +
				'<div class="happy-sheet" style="left: <%= sheet.x %>; top: <%= sheet.y %>;">' +
				'</div>';
			var instance = this;

			return data.replace(/<%=\s+(.*?)\s+%>/g, function (match, group1) {
					eval('var o = instance.model.' + group1 + ';');
					return o;
					});
		};

		NaiveGreenPlainView.prototype.render = function () {
			document.getElementById('output').innerHTML = this.output();
		};

		this.__initialized__ = true;
	}

	return this;
};


/**
  * Controller
  */
var GreenPlainController = function () {


	if(typeof GreenPlainController.__initialized__ === 'undefined') {
		GreenPlainController.prototype.loadView = function () {
			var greyWolf = new GreyWolf('200px', '150px');
			var happySheet = new HappySheet('300px', '155px');
			var model = new GreenPlainModel('800px', '600px');
			model.wolf = greyWolf;
			model.sheet = happySheet;
			var view = new NaiveGreenPlainView(model);
			view.render();
		};

		GreenPlainController.__initialized__ = true;
	}

	return this;
};

exports.GreenPlainController = GreenPlainController;
})(this);
</script>

</head>
<body>
<div id="output">
</div>
<script type="text/javascript">
;(function(exports, GreenPlainController) {
	function bootstrapper() {
		var controller = new GreenPlainController();
		controller.loadView();
	}

	bootstrapper();
})(this, this['GreenPlainController']);
</script>
</body>
</html>

